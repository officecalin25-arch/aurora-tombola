<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Aurora Bistro Tombola 2025</title>
  <style>
    body { font-family: system-ui, Arial, sans-serif; max-width: 640px; margin: 24px auto; padding: 0 12px; }
    header, footer { text-align:center; }
    img { max-width: 200px; display:block; margin: 12px auto; }
    form { margin-top: 16px; }
    label { display:block; margin: 10px 0; }
    button { padding: 10px 16px; font-size: 16px; cursor: pointer; }
    #msg { margin-top: 12px; font-weight: 600; }
  </style>
</head>
<body>
  <header>
    <img src="logo.jpg" alt="Aurora Bistro Logo">
    <h1>üéÑ Aurora Bistro Tombola 2025</h1>
   <p><strong>Szab√°ly:</strong><br>
  V√°s√°rolj egy pizz√°t, majd t√∂ltsd ki az ≈±rlapot (rendelj pizz√°t).<br>
  Helysz√≠n: Strada Csorgo (Millennium t√©r).
</p>

  </header>

  <form id="tombolaForm">
    <label>N√©v (nem k√∂telez≈ë):
      <input name="name" autocomplete="name">
    </label>
    <label>Telefonsz√°m*:
      <input name="phone" required inputmode="tel" placeholder="+36...">
    </label>
    <label>
      <input type="checkbox" name="consent" required>
      Hozz√°j√°rulok ahhoz, hogy az adataimat a tombola lebonyol√≠t√°s√°hoz feldolgozz√°k.
    </label>
    <button type="submit">Jelentkezem</button>
  </form>

  <p id="msg"></p>

  <footer>
    <p>üìç Strada Csorgo, Joseni 537130, Rom√°nia ‚Ä¢ ‚òéÔ∏è +40 758 504 137</p>
  </footer>

  <script>
    document.getElementById('tombolaForm').onsubmit = async (e)=>{
      e.preventDefault();
      const data = Object.fromEntries(new FormData(e.target).entries());
      data.consent = !!data.consent;
      const res = await fetch('/api/subscribe', {
        method:'POST', headers:{'Content-Type':'application/json'},
        body: JSON.stringify(data)
      });
      const json = await res.json().catch(()=>({message:'Hiba t√∂rt√©nt.'}));
      document.getElementById('msg').textContent = json.message || 'Elk√ºldve.';
      if (res.ok) e.target.reset();
    };
  </script>
</body>
</html>
