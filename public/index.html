<!doctype html>
<html lang="hu">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Aurora Bistro ‚Äì Nyerem√©nyj√°t√©k</title>
  <style>
    :root{--bg:#fff7ef;--card:#ffffff;--brand:#b22222}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:#222}
    .wrap{max-width:820px;margin:0 auto;padding:20px}
    header{text-align:center;margin:10px 0 20px}
    header img{max-width:160px;border-radius:12px}
    h1{color:var(--brand);margin:10px 0 6px;font-size:2.1rem}
    .card{background:var(--card);border-radius:14px;box-shadow:0 3px 14px rgba(0,0,0,.06);padding:18px;margin:16px 0}
    .muted{color:#666}
    form label{display:block;margin:10px 0 4px}
    input[type="text"],input[type="tel"]{width:100%;max-width:420px;padding:10px 12px;border:1px solid #ddd;border-radius:10px;font-size:1rem}
    button{background:var(--brand);color:#fff;border:0;border-radius:10px;padding:12px 18px;font-size:1rem;cursor:pointer}
    button:disabled{opacity:.6;cursor:not-allowed}
    .prizes li{margin:6px 0}
    .footer{margin-top:8px;font-size:.95rem}
  </style>
</head>
<body>
  <div class="wrap">

    <header>
      <img src="/logo.jpg" alt="Aurora Bistro">
      <h1>Nyerem√©nyj√°t√©k!</h1>
      <p class="muted">Oszd meg a bejegyz√©st ‚Äì rendelj pizz√°t ‚Äì √©s vegy√©l r√©szt a sorsol√°son!</p>
    </header>

    <section class="card">
      <h2>Hogyan m≈±k√∂dik?</h2>
      <p>Telefonsz√°modat minden rendel√©sn√©l k√©rj√ºk a c√≠meddel egy√ºtt ‚Äì √©s m√°ris benne vagy a j√°t√©kban!</p>

      <h3>Nyerem√©nyek</h3>
      <ol class="prizes">
        <li><strong>1. helyez√©s:</strong> egy Jura k√°v√©g√©p</li>
        <li><strong>2. helyez√©s:</strong> egy 100 lej √©rt√©k≈± aj√°nd√©kcsomag</li>
        <li><strong>3. helyez√©s:</strong> 2 szem√©lyes pizza utalv√°ny</li>
      </ol>

      <p><strong>Sorsol√°s: december 22-√©n!</strong> Sok szerencs√©t k√≠v√°nunk mindenkinek!</p>

      <p class="footer">
        üìç <strong>Strada Mil√©niumit√©r, Joseni 537130, Rom√°nia</strong><br>
        ‚òéÔ∏è <a href="tel:+40758504137">+40 758 504 137</a>
      </p>
    </section>

    <section class="card">
      <h2>Jelentkez√©si ≈±rlap</h2>
      <form id="tombolaForm" autocomplete="on">
        <label for="name">N√©v (opcion√°lis)</label>
        <input id="name" name="name" type="text" autocomplete="name" placeholder="N√©v (nem k√∂telez≈ë)">

        <label for="phone">Telefonsz√°m *</label>
        <input id="phone" name="phone" type="tel" inputmode="tel" placeholder="+40‚Ä¶" required>

        <label style="margin-top:10px">
          <input type="checkbox" id="consent" name="consent" required>
          Hozz√°j√°rulok, hogy adataimat a nyerem√©nyj√°t√©khoz kezelj√©k.
        </label>

        <div style="margin-top:12px">
          <button id="submitBtn" type="submit">Jelentkezem</button>
          <span id="msg" class="muted" style="margin-left:10px"></span>
        </div>
      </form>
    </section>

    <p class="muted">Admin: <a href="/admin.html">/admin.html</a></p>
  </div>

  <script>
    const f = document.getElementById('tombolaForm');
    const btn = document.getElementById('submitBtn');
    const msg = document.getElementById('msg');

    f.addEventListener('submit', async (e)=>{
      e.preventDefault();
      msg.textContent = '';
      btn.disabled = true;

      const data = {
        name: document.getElementById('name').value.trim(),
        phone: document.getElementById('phone').value.trim(),
        consent: document.getElementById('consent').checked
      };

      try{
        const r = await fetch('/api/subscribe', {
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify(data)
        });
        const j = await r.json();
        if(r.ok){
          msg.textContent = j.message || 'Sikeres jelentkez√©s! Sok szerencs√©t!';
          f.reset();
        }else{
          msg.textContent = j.error || 'Hiba t√∂rt√©nt. Pr√≥b√°ld √∫jra.';
        }
      }catch(_){
        msg.textContent = 'H√°l√≥zati hiba. Pr√≥b√°ld √∫jra.';
      }finally{
        btn.disabled = false;
      }
    });
  </script>
</body>
</html>
